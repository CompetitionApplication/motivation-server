<?xml version="1.0" encoding="UTF-8" ?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.co.mapper.UserMapper">
    <select id="selectUserByEmail" resultType="User">
        /* UserMapper.selectUser */
        select *
          from user a
         where user_email = #{userEmail}
    </select>

    <insert id="insertUser">
        /* UserMapper.LoginReqDto */
        insert into user (
                    user_id
                  , user_email
                  , created_id
                  , created_date
                  , mod_id
                  , mod_date
        ) values (
                   #{userId}
                 , #{loginReqDto.userEmail}
                 , 'system'
                 , CURRENT_TIMESTAMP
                 , 'system'
                 , CURRENT_TIMESTAMP
                 )
    </insert>

    <select id="selectRefreshtokenByUserId" resultType="Refreshtoken">
        /* UserMapper.selectRefreshtokenByUserId */
        select *
          from refreshtoken
         where user_id = #{userId}
    </select>

    <select id="selectRefreshtokenByRefrshTokenId" resultType="Refreshtoken">
        /* UserMapper.selectRefreshtokenByRefrshTokenId */
        select *
         from refreshtoken
        where refreshtoken_id = #{refreshTokenId}
    </select>

    <insert id="insertRefrshtoken">
        /* UserMapper.insertRefrshtoken */
        insert into refreshtoken (
                    refreshtoken_id
                  , user_id
                  , refreshtoken
                  , created_id
                  , created_date
                  , mod_id
                  , mod_date
        ) values (
                   #{refreshTokenId}
                 , #{userId}
                 , #{refreshToken}
                 , 'system'
                 , CURRENT_TIMESTAMP
                 , 'system'
                 , CURRENT_TIMESTAMP
                 )
    </insert>

    <update id="updateRefrshtoken">
        /* UserMapper.updateRefrshtoken */
        update refreshtoken
           set refreshtoken = #{refreshToken}
         where user_id = #{userId}
    </update>

    <select id="selectUserByUserId" resultType="User">
        /* UserMapper.selectUserByUserId */
        select *
        from user a
        where user_id = #{userId}
    </select>
</mapper>








